<div class="container-fluid">
  <div class="text-center fs-2 pt-5 pb-2">Listado de Invitaciones</div>
  <div class="container">
    <div class="row d-flex justify-content-between align-items-center mb-4">
      <div class="mb-4 d-none d-md-block col-4" style="max-width: 325px;">
        <app-search (search)="onSearch($event)"></app-search>
      </div>

      <div class="d-none d-md-block col-2">
        <button class="btn btn-outline-success rounded-0" data-bs-toggle="modal"
          data-bs-target="#exampleModalCrear">Crear
          Invitación</button>
      </div>

      <div class="d-flex justify-content-start pb-4 mt-4 d-md-none">
        <button class="btn btn-outline-success rounded-0" data-bs-toggle="modal"
          data-bs-target="#exampleModalCrear">Crear
          Invitación</button>
      </div>

      <div class="d-flex justify-content-between mb-4 d-md-none">
        <app-search (search)="onSearch($event)" class="flex-grow-1"></app-search>
      </div>
    </div>

    <!--
    Preguntar si mejor poner o no;
    <div *ngIf="isLoading" class="text-center">
      <div class="spinner-border text-dark" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div> -->

    <div class="table-responsive d-none d-md-block">

      <table class="table table-hover">
        <thead>
          <tr class="text-center text-dark">
            <th>
              <app-column-sort [clear]="orderNamesClear.id" [fieldInput]="'ID'" [fieldQueryInput]="'id'"
                (orderOuput)="onChangeOrder($event)">
              </app-column-sort>
            </th>
            <th>
              <app-column-sort [clear]="orderNamesClear.nombre" [fieldInput]="'Nombre'" [fieldQueryInput]="'nombre'"
                (orderOuput)="onChangeOrder($event)">
              </app-column-sort>
            </th>
            <th>
              <app-column-sort [clear]="orderNamesClear.descripcion" [fieldInput]="'Descripción'"
                [fieldQueryInput]="'descripcion'" (orderOuput)="onChangeOrder($event)">
              </app-column-sort>
            </th>
            <th>
              <app-column-sort [clear]="orderNamesClear.precio" [fieldInput]="'Precio'" [fieldQueryInput]="'precio'"
                (orderOuput)="onChangeOrder($event)">
              </app-column-sort>
            </th>
            <th>
              <app-column-sort [clear]="orderNamesClear.stock" [fieldInput]="'Stock'" [fieldQueryInput]="'stock'"
                (orderOuput)="onChangeOrder($event)">
              </app-column-sort>
            </th>
            <th>
              Acciones
              <button class="border-0 bg-transparent" (click)="onClearOrder()">
                <i class="fa-solid fa-ban"></i>
              </button>
            </th>
          </tr>
        </thead>
        <tbody>
          @if (productos.length > 0) {
          @for (producto of productos; track producto.id; let isOdd = $odd, isEven = $even) {
          <tr class="text-center">
            <td>{{ producto.id }}</td>
            <td>{{ producto.nombre }}</td>
            <td>{{ producto.descripcion }}</td>
            <td>{{ producto.precio }}</td>
            <td>{{ producto.stock }}</td>
            <td>
              <button class="bg-transparent border-0" data-bs-toggle="modal" data-bs-target="#exampleModalEditar">
                <i class="fa-solid fa-pen-to-square text-secondary fs-5"></i>
              </button>
              <button class="bg-transparent border-0" data-bs-toggle="modal" data-bs-target="#exampleModalEliminar">
                <i class="fa-solid fa-trash text-secondary fs-5"></i>
              </button>
            </td>
          </tr>
          }
          } @else {
          <tr>
            <td colspan="7">
              <p>Ninguna categoría encontrada.</p>
            </td>
          </tr>
          }
        </tbody>
      </table>

    </div>

    <div *ngIf="productos.length > 0" class="d-md-none">
      <div class="d-md-none mb-3 px-2">
        <div class="row fw-bold">
          <div class="col-6 mb-1">
            <app-column-sort [clear]="orderNamesClear.id" [fieldInput]="'ID'" [fieldQueryInput]="'id'"
              (orderOuput)="onChangeOrder($event)">
            </app-column-sort>
          </div>
          <div class="col-6 mb-1">
            <app-column-sort [clear]="orderNamesClear.nombre" [fieldInput]="'Nombre'" [fieldQueryInput]="'nombre'"
              (orderOuput)="onChangeOrder($event)">
            </app-column-sort>
          </div>
          <div class="col-6 mb-1">
            <app-column-sort [clear]="orderNamesClear.descripcion" [fieldInput]="'Descripción'"
              [fieldQueryInput]="'descripcion'" (orderOuput)="onChangeOrder($event)">
            </app-column-sort>
          </div>
          <div class="col-6 mb-1">
            <app-column-sort [clear]="orderNamesClear.precio" [fieldInput]="'Precio'" [fieldQueryInput]="'precio'"
              (orderOuput)="onChangeOrder($event)">
            </app-column-sort>
          </div>
          <div class="col-6 mb-1">
            <app-column-sort [clear]="orderNamesClear.stock" [fieldInput]="'Stock'" [fieldQueryInput]="'stock'"
              (orderOuput)="onChangeOrder($event)">
            </app-column-sort>
          </div>
          <div class="col-12 d-flex align-items-center justify-content-between pt-2 border-top">
            <span class="text-dark fw-semibold">Acciones</span>
            <button class="border-0 bg-transparent" (click)="onClearOrder()">
              <i class="fa-solid fa-ban"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="card mb-3 rounded shadow-sm" *ngFor="let producto of productos">
        <div class="card-body">
          <h5 class="card-title font2 fw-bolder text-decoration-underline text-start mb-3 pb-1"
            style="text-underline-offset: 5px;">Pedido {{
            producto.id }}</h5>
          <div class="card-text text-start">
            <div class="row mb-2">
              <div class="col-6 fw-bold">Nombre</div>
              <div class="col-6">{{ producto.nombre }}</div>
            </div>
            <div class="row mb-2">
              <div class="col-6 fw-bold">Descripción</div>
              <div class="col-6">{{ producto.descripcion }}</div>
            </div>
            <div class="row mb-2">
              <div class="col-6 fw-bold">Precio</div>
              <div class="col-6">{{ producto.precio }}</div>
            </div>
            <div class="row mb-2">
              <div class="col-6 fw-bold">Stock</div>
              <div class="col-6">{{ producto.stock }}</div>
            </div>
            <div class="d-flex justify-content-start mt-3">
              <button class="bg-transparent border-0" data-bs-toggle="modal" data-bs-target="#exampleModalEditar">
                <i class="fa-solid fa-pen-to-square text-secondary fs-5"></i>
              </button>
              <button class="bg-transparent border-0" data-bs-toggle="modal" data-bs-target="#exampleModalEliminar">
                <i class="fa-solid fa-trash text-secondary fs-5"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div>
      <div class="col-span-6">
        <app-paginator [pageInput]="page" [sizeInput]="pageSize" [totalInput]="totalSize"
          (pageOuput)="onChangePage($event)"></app-paginator>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="exampleModalCrear" tabindex="-1" aria-labelledby="exampleModalLabelCrear"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabelCrear">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="exampleModalEditar" tabindex="-1" aria-labelledby="exampleModalLabelEditar"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabelEditar">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="exampleModalEliminar" tabindex="-1" aria-labelledby="exampleModalLabelEliminar"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabelEliminar">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
